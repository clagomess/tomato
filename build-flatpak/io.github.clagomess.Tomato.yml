id: io.github.clagomess.Tomato
runtime: org.freedesktop.Platform
runtime-version: '23.08'
sdk: org.freedesktop.Sdk
command: tomato
sdk-extensions:
  - org.freedesktop.Sdk.Extension.openjdk17

finish-args:
  - --share=network
  - --filesystem=home
  - --env=PATH=/app/bin:/usr/bin:/app/lib/jvm/java-17-openjdk/bin
  - --env=JAVA_HOME=/app/lib/jvm/java-17-openjdk

modules:
  - name: tomato
    buildsystem: simple
    build-commands:
      - install -v -Dm755 build-linux/tomato.sh /app/bin/tomato
      - mkdir -p /app/share
      - cp -R release/** /app/share/
      - install -v -D build-linux/tomato.desktop /app/share/applications/tomato.desktop
      - install -v -D build-linux/icon-64x64.png /app/share/icons/hicolor/64x64/apps/tomato.png
      - install -v -D build-linux/icon-128x128.png /app/share/icons/hicolor/128x128/apps/tomato.png
    sources:
      - type: dir
        path: /tmp/tomato/release
        dest: release

      - type: dir
        path: /tmp/tomato/build-linux
        dest: build-linux
